# Задания на Стажировку в Яндекс за осень 2021 (`03.11.2021`)

## Задание A. Медиана с вычитанием

Дан массив a длины 3 из целых чисел.

Определим операцию изменения массива: выбирается два различных индекса i и j (1≤i,j≤3, i≠j), после чего a[i] становится равным a[i]−a[j].

Пример операции: дан массив [1,−3,2], выбрали i=2,j=1, получили массив [1,−3−1,2] = [1,−4,2].

Определим для массива a медиану m как значение, расположенное на позиции 2 при сортировке элементов массива a.

К примеру, медианой массива a = [1,−3,2] является m = 1, так как в сортированном массиве [−3,1,2] именно 1 стоит на позиции 2.

Назовём медианным индексом такой индекс i, что ai = m.

Обратите внимание, что медианный индекс необязательно единственный: в массиве a = [3,0,3] медиана m = 3, а медианными индексами являются i1 = 1 (a1 = m) и i2 = 3 (a3 = m).

Для каждого индекса i массива a выясните, может ли он стать медианным, если можно сделать не более одной операции изменения массива (можно не делать операций вовсе).

## Задание B. Яндекс.Бар

Яндекс запускает новый бизнес-юнит – Яндекс.Бар. При разработке меню появилась необходимость рисовать слоистые коктейли. Для поддержания концепции IT-бара было принято решение рисовать коктейли, используя ASCII-арт. Вам необходимо считать форму стакана и список ингредиентов слоистого коктейля, заполнить стакан ингредиентами в нужном порядке и распечатать результат.

Описание стакана – это символьное поле из n строк по m символов в каждой. Поле состоит из символов `.` (точек), `\` (обратных слешей), `/` (прямых слешей), `|` (вертикальных черт), `_` (нижних подчеркиваний) и пробелов.

Дно стакана расположено на последней n-й строке и состоит из символов _ (нижних подчеркиваний), расположенных слитно.

Слева и справа от дна нарисованы грани стакана. Грань – это «ломаная» из символов \ (обратных слешей), / (прямых слешей), | (вертикальных черт). Каждая грань состоит из ровно n символов, начинается в последней n-й строке и заканчивается в первой. Для любой пары соседних строк i и i+1 символы грани расположены в одном или соседних столбцах. Грани не пересекаются и не касаются друг друга ни по стороне, ни по углу. В частности из этого следует, что в любой строке, кроме последней n-й, есть пустое место, обозначаемое пробелами.

Фон изображения стакана состоит из символов . (точек), расположенных слева от левой грани стакана и справа от правой.

### Формат ввода

Первая строка содержит два числа n и m (2≤n≤100, 3≤m≤100), которые обозначают размеры поля – изображения стакана.

Следующие n строк по m символов в каждой содержат описание стакана в формате, указанном выше.

Следующая строка содержит число k (0≤k≤min(n−1,89)) – количество ингредиентов коктейля.

Следующие k строк содержат описания ингредиентов, по одному в каждой строке. Описание имеет вид nameicountisymboli.

namei – это название i-го ингредиента (строка из строчных латинских букв длиной не менее 1 и не более 10).

counti – это количество слоев i-го ингредиента.

symboli – это символ, которым i-й ингредиент должен быть представлен в изображении (любой символ с ASCII кодом больше 32 и меньше 127, кроме тех, которые используются в описании изображения стакана).

Гарантируется, что сумма всех counti не превосходит высоты стакана, то есть n−1. Также гарантируется что все символы symboli уникальны.

### Формат вывода

В n строках по m символов в каждой выведите описание стакана в указанном выше формате.

### Пример 1

Ввод:
```
8 15
\             /
.|           |.
.|           |.
..\         /..
...|       |...
...|       |...
....\     /....
.....\___/.....
2
gin 2 %
tonic 4 *
```

Вывод:
```
\             /
.|***********|.
.|***********|.
..\*********/..
...|*******|...
...|%%%%%%%|...
....\%%%%%/....
.....\___/.....
```

### Пример 2

Ввод:
```
10 23
.........\   /.........
........./   \.........
......../     \........
......./       \.......
....../         \......
...../           \.....
..../             \....
.../               \...
../                 \..
./___________________\.
1
acid 5 X
```

Вывод:
```
.........\   /.........
........./   \.........
......../     \........
......./       \.......
....../XXXXXXXXX\......
...../XXXXXXXXXXX\.....
..../XXXXXXXXXXXXX\....
.../XXXXXXXXXXXXXXX\...
../XXXXXXXXXXXXXXXXX\..
./___________________\.
```

### Пример 3

Ввод:
```
16 28
...|                    |...
...|                    |...
...|                    |...
...|                    |...
...|                    |...
...|                    |...
....|                  |....
....|                  |....
....|                  |....
....|                  |....
....|                  |....
.....|                |.....
.....|                |.....
.....|                |.....
.....|                |.....
......|______________|......
4
kahlua 4 k
baileys 5 b
cointreau 3 c
fire 1 !
```

Вывод:
```
...|                    |...
...|                    |...
...|!!!!!!!!!!!!!!!!!!!!|...
...|cccccccccccccccccccc|...
...|cccccccccccccccccccc|...
...|cccccccccccccccccccc|...
....|bbbbbbbbbbbbbbbbbb|....
....|bbbbbbbbbbbbbbbbbb|....
....|bbbbbbbbbbbbbbbbbb|....
....|bbbbbbbbbbbbbbbbbb|....
....|bbbbbbbbbbbbbbbbbb|....
.....|kkkkkkkkkkkkkkkk|.....
.....|kkkkkkkkkkkkkkkk|.....
.....|kkkkkkkkkkkkkkkk|.....
.....|kkkkkkkkkkkkkkkk|.....
......|______________|......
```

### Пример 4

Ввод:
```
10 16
...|     \......
...|      /.....
../        /....
...\        /...
....|        \..
...../      |...
......\     /...
.......|   |....
....../     \...
.......\_____\..
4
some 1 (
thing 2 ?
really 3 )
strange 1 ^
```

Вывод:
```
...|     \......
...|      /.....
../^^^^^^^^/....
...\))))))))/...
....|))))))))\..
...../))))))|...
......\?????/...
.......|???|....
....../(((((\...
.......\_____\..
```

## Задание C. Защитники башни

В не очень далёкой галактике на планете Икс-Бомбикс тоже проводится чемпионат мира по футболу. На этой планете солнечные лучи в течение всего дня падают ровно вертикально вниз.

Возле главного стадиона расположена сторожевая башня, состоящая из n плит, расположенных друг над другом так, что их левые края прикреплены к общей колонне. Длина i-й плиты равна ai.

Занимать пост на сторожевой башне стадиона вызвались m добровольцев - охранников. j-й доброволец имеет ширину плеч bj, а высота любого из них меньше, чем расстояние между соседними плитами.

С башни открывается отличный вид на стадион, поэтому очень много добровольцев хотят на неё попасть. В то же время из-за техники безопасности при распределении охранников по плитам башни должны выполняться следующие условия:

1. Охранник будет стоять на плите боком, поэтому ширина плеч охранника не должна превышать длины плиты.
2. Охранник должен быть расположен на плите полностью - по краям плиты стоят защитные ограждения (чтобы с неё нельзя было упасть).
3. Охранник должен полностью находиться под солнечными лучами (если он будет в тени хотя бы частью тела, то за время матча замерзнет).
4. На одной плите может быть не более одного охранника (два добровольца не поделят место под солнцем).

Изучите графическое представление первого теста ниже в примечании для лучшего понимания задачи.

Вам необходимо расположить максимальное число добровольцев по плитам с выполнением описанных условий. Скорее, матч начнётся с минуты на минуту, а добровольцы так и не знают, кого возьмут охранять главный стадион галактики и кто сможет насладиться крутым видом на игру!

## Задание D. Считаем клетки

На огромной квадратной доске, разделенной на квадратные белые клетки, покрасили некоторые клетки в черный цвет так, что образованная черными клетками фигура удовлетворяет следующим условиям:

1. Из любой черной клетки можно добраться в любую черную, переходя только по другим черным клеткам. Переходить можно только вправо, влево, вверх или вниз, но не по диагонали через угол.
2. Не существует такой черной клетки, перекраска которой в белый цвет приведет к нарушению условия 1.
3. Не существует такой черной клетки, что в двух противоположных направлениях по стороне (сверху и снизу и/или слева и справа) находится белая клетка или граница поля.
4. Из любой белой клетки можно добраться до границы доски, переходя только по белым клеткам. Переходить можно только вправо, влево, вверх или вниз, но не по диагонали через угол.

Назовем контуром фигуры множество черных клеток, у которых хотя бы в одном из 8 направлений (по стороне или углу) расположена белая клетка или граница поля.

После покраски фигуру выпилили из доски. Причем все распилы были параллельны сторонам доски и проходили только через середины клеток контура. После этого во все углы полученной фигуры поставили отметки.

Графическое представление примеров возможных и невозможных фигур и разрезов представлено ниже в примечании.

Вам даны координаты клеток с отметками xi,yi (отметки расположены в центрах соответствующих клеток) в порядке обхода против часовой стрелки. Порядок обхода такой, что фигура остается по левую руку от каждого отрезка [xi,yi;xi+1,yi+1]. Ваша задача – посчитать, сколько клеток каждого типа содержит фигура. Клетки бывают четырех типов:

- Полные клетки (без распилов)
- Половинные клетки (по которым проходит один прямой распил)
- Внешние углы (клетки с двумя перпендикулярными распилами, у которых четверть площади принадлежит фигуре)
- Внутренние углы (клетки с двумя перпендикулярными распилами, у которых три четверти площади принадлежит фигуре)

## Задание E. Версия 0.9.9.9.9.9....

Есть сложная программная система, состоящая из 3 модулей  — A, B, C. Модули независимо друг от друга обновляются, у каждого из них есть номер версии (например A23, B2 или C10). 3 номера версий модулей составляют версию системы - версии из примера образуют версию системы [23,2,10].

Минимальная версия каждого модуля равна 1, а максимальные версии для каждого модуля свои  — Na, Nb, Nc.

Хотя модули довольно независимы, но некоторые связи между ними есть. Вследствие этого существуют правила вида «Если версия модуля X равна K или выше, то версия модуля Y обязательно должна быть M или выше», причем правила односторонние.

Пример такого правила: (A5, B3)  — «Если модуль A версии 5 или выше, то модуль B должен быть версии 3 или выше».

Такому правилу будут удовлетворять следующие пары версий модулей (A,B): (5,3), (5,4), (6,3), (4,2), (4,3),  — но не будет удовлетворять пара (5,2). Обратите внимание, что пара (4,2) является корректной, так как A4<A5, а значит правило на неё не распространяется.

Комбинации правил могут в принципе исключать возможность использования той или иной версии (особенности разработки), к примеру правила (C5, B3) и (B2, C6) делают версию C5 невозможной, так как для C5 требуется не менее B3, а для B3 (так как она выше B2) требуется минимум C6.

Назовем версию системы корректной, если она удовлетворяет всем заданным правилам.

Вычислите количество корректных версий системы с учетом заданных правил и максимальных версий модулей.

## Задание F. В поисках сломанного коммита

В одной небезызвестной компании, менеджер старшего разряда Андрей с командой создают новый продукт « Он.Компановщик ». Как и всегда, разработка большого проекта предполагает множество коммитов в репозиторий с проектом, количество которых временами доходит до 100 в день. Так как производить тестирование проекта после каждого коммита не представляется возможным, то в самый неудобный для этого момент (по всем законам жанра ужасов) проект перестал проходить тесты. Молодой, но опытный менеджер Андрей поставил перед собой задачу найти тот коммит, который всё ломает.

Андрей знает, что коммиты в репозитории делятся на два типа: большие «B» (big) и маленькие «S» (small). Также Андрей знает, что время пересборки проекта зависит только от того, был ли большой коммит между ревизиями сборки. Например, если последовательность коммитов выглядит как «BSBS», а у Андрея есть в текущий момент собранный проект после последнего (4-го) коммита, то он может собрать проект после 3-го коммита за a минут, так как четвёртый коммит маленький, а проект после второго коммита за b минут, так как 4-й коммит маленький, но 3-й большой.

Более формально, если в текущий момент проект собран после i-го коммита, а Андрей хочет собрать проект после j-го коммита, то пересборка займёт b минут, если между коммитами i и j есть большой коммит, и a минут в противном случае.

К сожалению, в сфере сборки Андрей ещё слишком неопытен, поэтому он может хранить только один бинарный файл (бинарь) проекта единовременно, и сейчас перед ним собранный бинарь после последнего коммита, который гарантированно не проходит тесты. Можно считать, что бинарь перед первым коммитом был протестирован и все тесты проходил. Заметьте, что в отличие от сборки, время тестирования собранного бинаря равно нулю.

Помогите Андрею рассчитать, за какое минимальное гарантированное время он может найти сломанный коммит.

Гарантируется, что среди коммитов есть ровно один ломающий, а также, что ни один коммит не чинит код после поломки. Иными словами, для некоторого k код проходит тесты после первых k коммитов и не проходит их в дальнейшем.
